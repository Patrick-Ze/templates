[{"comment":"签到页","request":{"method":"GET","url":"https://{{domain_no_http}}/plugin.php?id=dd_sign%3Aindex","headers":[{"name":":authority","value":"{{domain_no_http}}"},{"name":":method","value":"GET"},{"name":":path","value":"/plugin.php?id=dd_sign:index"},{"name":":scheme","value":"https"},{"name":"accept","value":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"},{"name":"accept-encoding","value":"gzip, deflate, br"},{"name":"accept-language","value":"zh-CN,zh-TW;q=0.9,zh;q=0.8,en-US;q=0.7,en;q=0.6,ja;q=0.5"},{"name":"cache-control","value":"no-cache"},{"name":"pragma","value":"no-cache"},{"name":"referer","value":"https://{{domain_no_http}}/"},{"name":"sec-ch-ua","value":"\"Chromium\";v=\"104\", \" Not A;Brand\";v=\"99\", \"Google Chrome\";v=\"104\""},{"name":"sec-ch-ua-mobile","value":"?0"},{"name":"sec-ch-ua-platform","value":"\"Windows\""},{"name":"sec-fetch-dest","value":"document"},{"name":"sec-fetch-mode","value":"navigate"},{"name":"sec-fetch-site","value":"same-origin"},{"name":"sec-fetch-user","value":"?1"},{"name":"upgrade-insecure-requests","value":"1"},{"name":"user-agent","value":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"},{"name":"cookie","value":"{{cookie}}"}],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"loginhash","re":"loginhash=([a-zA-Z0-9]+)","from":"content"},{"name":"formhash","re":"name=\"formhash\" value=\"(.+)\"","from":"content"},{"name":"sum","re":"0","from":"content"},{"name":"num","re":"0","from":"content"}]}},{"comment":"获取 idhash","request":{"method":"GET","url":"https://{{domain_no_http}}/plugin.php?id=dd_sign&mod=sign&infloat=yes&handlekey=pc_click_ddsign&inajax=1&ajaxtarget=fwin_content_pc_click_ddsign","headers":[{"name":":authority","value":"{{domain_no_http}}"},{"name":":method","value":"GET"},{"name":":path","value":"/plugin.php?id=dd_sign&mod=sign&infloat=yes&handlekey=pc_click_ddsign&inajax=1&ajaxtarget=fwin_content_pc_click_ddsign"},{"name":":scheme","value":"https"},{"name":"accept","value":"*/*"},{"name":"accept-encoding","value":"gzip, deflate, br"},{"name":"accept-language","value":"zh-CN,zh-TW;q=0.9,zh;q=0.8,en-US;q=0.7,en;q=0.6,ja;q=0.5"},{"name":"cache-control","value":"no-cache"},{"name":"pragma","value":"no-cache"},{"name":"referer","value":"https://{{domain_no_http}}/plugin.php?id=dd_sign:index"},{"name":"sec-ch-ua","value":"\"Chromium\";v=\"104\", \" Not A;Brand\";v=\"99\", \"Google Chrome\";v=\"104\""},{"name":"sec-ch-ua-mobile","value":"?0"},{"name":"sec-ch-ua-platform","value":"\"Windows\""},{"name":"sec-fetch-dest","value":"empty"},{"name":"sec-fetch-mode","value":"cors"},{"name":"sec-fetch-site","value":"same-origin"},{"name":"user-agent","value":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"},{"name":"x-requested-with","value":"XMLHttpRequest"},{"name":"cookie","value":"{{cookie}}"}],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"formhash","re":"name=\"formhash\" value=\"(.+)\"","from":"content"},{"name":"idhash","re":"secqaa_(.+?)\"","from":"content"},{"name":"signtoken","re":"name=\"signtoken\" value=\"(.+)\"","from":"content"},{"name":"signhash","re":"signhash=(.+)\"","from":"content"}]}},{"comment":"生成随机值","request":{"method":"GET","url":"api://util/string/replace?r=text&t=&p=&s={{random(0,1,17)|urlencode}}","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"rand_value","re":".+","from":"content"}]}},{"comment":"获取验证公式","request":{"method":"GET","url":"https://{{domain_no_http}}/misc.php?mod=secqaa&action=update&idhash={{idhash|urlencode}}&{{rand_value|urlencode}}","headers":[{"name":":authority","value":"{{domain_no_http}}"},{"name":":method","value":"GET"},{"name":":path","value":"/misc.php?mod=secqaa&action=update&idhash={{idhash}}&{{rand_value}}"},{"name":":scheme","value":"https"},{"name":"accept","value":"*/*"},{"name":"accept-encoding","value":"gzip, deflate, br"},{"name":"accept-language","value":"zh-CN,zh-TW;q=0.9,zh;q=0.8,en-US;q=0.7,en;q=0.6,ja;q=0.5"},{"name":"cache-control","value":"no-cache"},{"name":"pragma","value":"no-cache"},{"name":"referer","value":"https://{{domain_no_http}}/plugin.php?id=dd_sign:index"},{"name":"sec-ch-ua","value":"\"Chromium\";v=\"104\", \" Not A;Brand\";v=\"99\", \"Google Chrome\";v=\"104\""},{"name":"sec-ch-ua-mobile","value":"?0"},{"name":"sec-ch-ua-platform","value":"\"Windows\""},{"name":"sec-fetch-dest","value":"script"},{"name":"sec-fetch-mode","value":"no-cors"},{"name":"sec-fetch-site","value":"same-origin"},{"name":"user-agent","value":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"},{"name":"cookie","value":"{{cookie}}"}],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"verify","re":"sectplcode\\[2\\] \\+ '(.+?) =","from":"content"}]}},{"comment":"加法符号替换","request":{"method":"GET","url":"api://util/string/replace?r=text&p=%5C%2B&s={{verify|urlencode}}&t=%2C","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"verify1","re":".+","from":"content"}]}},{"comment":"减法符号替换","request":{"method":"GET","url":"api://util/string/replace?r=text&p=%5C-&s={{verify1|urlencode}}&t=%2C-","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"verify2","re":".+","from":"content"}]}},{"comment":"字符串替换","request":{"method":"GET","url":"api://util/string/replace?p=.*&t=%C2%A0&s={{verify2|replace(\" \",\"\")|urlencode}}","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"},{"re":"\"状态\": \"OK\"","from":"content"}],"failed_asserts":[],"extract_variables":[{"name":"nums","re":"/([\\-1-9][0-9]*)/g","from":"content"}]}},{"comment":"for循环开始","request":{"method":"GET","url":"{% for num in nums %}","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"undefined","from":"status"}],"failed_asserts":[],"extract_variables":[]}},{"comment":"累加计算","request":{"method":"GET","url":"api://util/string/replace?p=%C2%A0&t=%C2%A0&s={{add(sum,num)|urlencode}}","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"sum","re":"\"处理后字符串\": \"(0|[1-9][0-9]*)","from":"content"}]}},{"comment":"for循环结束","request":{"method":"GET","url":"{% endfor %}","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"undefined","from":"status"}],"failed_asserts":[],"extract_variables":[]}},{"comment":"签到验证","request":{"method":"GET","url":"https://{{domain_no_http}}/misc.php?mod=secqaa&action=check&inajax=1&modid=&idhash={{idhash|urlencode}}&secverify={{sum|urlencode}}","headers":[{"name":":authority","value":"{{domain_no_http}}"},{"name":":method","value":"GET"},{"name":":path","value":"/misc.php?mod=secqaa&action=check&inajax=1&modid=&idhash={{idhash}}&secverify={{sum}}"},{"name":":scheme","value":"https"},{"name":"accept","value":"*/*"},{"name":"accept-encoding","value":"gzip, deflate, br"},{"name":"accept-language","value":"zh-CN,zh-TW;q=0.9,zh;q=0.8,en-US;q=0.7,en;q=0.6,ja;q=0.5"},{"name":"cache-control","value":"no-cache"},{"name":"pragma","value":"no-cache"},{"name":"referer","value":"https://{{domain_no_http}}/plugin.php?id=dd_sign:index"},{"name":"sec-ch-ua","value":"\"Chromium\";v=\"104\", \" Not A;Brand\";v=\"99\", \"Google Chrome\";v=\"104\""},{"name":"sec-ch-ua-mobile","value":"?0"},{"name":"sec-ch-ua-platform","value":"\"Windows\""},{"name":"sec-fetch-dest","value":"empty"},{"name":"sec-fetch-mode","value":"cors"},{"name":"sec-fetch-site","value":"same-origin"},{"name":"user-agent","value":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"},{"name":"x-requested-with","value":"XMLHttpRequest"},{"name":"cookie","value":"{{cookie}}"}],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[]}},{"comment":"签到\n","request":{"method":"POST","url":"https://{{domain_no_http}}/plugin.php?id=dd_sign&mod=sign&signsubmit=yes&handlekey=pc_click_ddsign&signhash={{signhash|urlencode}}&inajax=1","headers":[{"name":":authority","value":"{{domain_no_http}}"},{"name":":method","value":"POST"},{"name":":path","value":"/plugin.php?id=dd_sign&mod=sign&signsubmit=yes&handlekey=pc_click_ddsign&signhash={{signhash}}&inajax=1"},{"name":":scheme","value":"https"},{"name":"accept","value":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"},{"name":"accept-encoding","value":"gzip, deflate, br"},{"name":"accept-language","value":"zh-CN,zh-TW;q=0.9,zh;q=0.8,en-US;q=0.7,en;q=0.6,ja;q=0.5"},{"name":"cache-control","value":"no-cache"},{"name":"content-type","value":"application/x-www-form-urlencoded"},{"name":"origin","value":"https://{{domain_no_http}}"},{"name":"pragma","value":"no-cache"},{"name":"referer","value":"https://{{domain_no_http}}/plugin.php?id=dd_sign:index"},{"name":"sec-ch-ua","value":"\"Chromium\";v=\"104\", \" Not A;Brand\";v=\"99\", \"Google Chrome\";v=\"104\""},{"name":"sec-ch-ua-mobile","value":"?0"},{"name":"sec-ch-ua-platform","value":"\"Windows\""},{"name":"sec-fetch-dest","value":"iframe"},{"name":"sec-fetch-mode","value":"navigate"},{"name":"sec-fetch-site","value":"same-origin"},{"name":"sec-fetch-user","value":"?1"},{"name":"upgrade-insecure-requests","value":"1"},{"name":"user-agent","value":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"},{"name":"cookie","value":"{{cookie}}"}],"cookies":[],"data":"mod=secqaa&action=check&inajax=1&modid=&idhash={{idhash|urlencode}}&secverify={{sum|urlencode}}","mimeType":"application/x-www-form-urlencoded"},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"msg","re":"([\\u4e00-\\u9fa50-9，！。]+)<","from":"content"}]}},{"comment":"获取当前积分","request":{"method":"GET","url":"https://{{domain_no_http}}/home.php?mod=spacecp&ac=credit","headers":[{"name":":authority","value":"{{domain_no_http}}"},{"name":":method","value":"GET"},{"name":":path","value":"/home.php?mod=spacecp&ac=credit"},{"name":":scheme","value":"https"},{"name":"accept","value":"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"},{"name":"accept-encoding","value":"gzip, deflate, br"},{"name":"accept-language","value":"zh-CN,zh-TW;q=0.9,zh;q=0.8,en-US;q=0.7,en;q=0.6,ja;q=0.5"},{"name":"cache-control","value":"no-cache"},{"name":"pragma","value":"no-cache"},{"name":"sec-ch-ua","value":"\"Chromium\";v=\"104\", \" Not A;Brand\";v=\"99\", \"Google Chrome\";v=\"104\""},{"name":"sec-ch-ua-mobile","value":"?0"},{"name":"sec-ch-ua-platform","value":"\"Windows\""},{"name":"sec-fetch-dest","value":"document"},{"name":"sec-fetch-mode","value":"navigate"},{"name":"sec-fetch-site","value":"none"},{"name":"sec-fetch-user","value":"?1"},{"name":"upgrade-insecure-requests","value":"1"},{"name":"user-agent","value":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"},{"name":"cookie","value":"{{cookie}}"}],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[{"re":"invalid","from":"content"}],"extract_variables":[{"name":"jq","re":"金钱: </em>(\\d+)","from":"content"},{"name":"jf","re":"积分: </em>(\\d+)","from":"content"},{"name":"sb","re":"色币: </em>(\\d+)","from":"content"},{"name":"pf","re":"评分: </em>(\\d+)","from":"content"},{"name":"nickName","re":"访问我的空间\">(.+?)<","from":"content"}]}},{"comment":"生成日志","request":{"method":"GET","url":"api://util/string/replace?r=text&t=%C2%A0&p=%C2%A0&s=%E7%94%A8%E6%88%B7%EF%BC%9A%E3%80%90{{nickName|urlencode}}%E3%80%91%5Cr%5Cn%E7%AD%BE%E5%88%B0%E4%BF%A1%E6%81%AF%EF%BC%9A%E3%80%90{{msg|urlencode}}%E3%80%91%5Cr%5Cn%E9%87%91%E9%92%B1%EF%BC%9A%E3%80%90{{jq|urlencode}}%E3%80%91%EF%BC%8C%E7%A7%AF%E5%88%86%EF%BC%9A%E3%80%90{{jf|urlencode}}%E3%80%91%EF%BC%8C%E8%89%B2%E5%B8%81%EF%BC%9A%E3%80%90{{sb|urlencode}}%E3%80%91%EF%BC%8C%E8%AF%84%E5%88%86%EF%BC%9A%E3%80%90{{pf|urlencode}}%E3%80%91%0A","headers":[],"cookies":[]},"rule":{"success_asserts":[{"re":"200","from":"status"}],"failed_asserts":[],"extract_variables":[{"name":"__log__","re":".+","from":"content"}]}}]